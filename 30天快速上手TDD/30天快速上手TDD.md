[30天快速上手TDD](https://ithelp.ithome.com.tw/users/20010292/ironman/462)
=================

# [Day 1 TDD guidance](https://ithelp.ithome.com.tw/articles/10101867)

# [Day 2 Unit Testing 簡介](https://ithelp.ithome.com.tw/articles/10102264)

## Why

## What

### Unit Test的準則
1. 最小的測試單位。
2. 一個測試案例只測一種方法(method、function)。
3. 測試案例之間相依性為零。
4. 外部相依性為零。
5. 不具備邏輯。

### Unit Test的特性
1. Fast：快速。
2. Independent：獨立。
3. Repeatable：可重複。
4. Self-Validating：可反應驗證結果。單元測試不論成功或失敗，都應該要從測試的report直接了解其意義或失敗原因。
5. Timely：及時。應恰好在使其通過的production code之前撰寫。

## Where
單元測試的範圍，以定義來說，單元測試是最小的測試單位。在物件導向中，就是測試一個方法。

### 單元測試透過以下幾種方式去驗證物件的行為是否符合預期

1. 驗證目標物件的回傳值。
2. 驗證目標物件的狀態改變。
3. 驗證目標物件與外部相依介面的互動方式。

## Who

### 單元測試該由誰來撰寫：developer

單元測試簡單的說，就是我們在設計物件的時候，預期外部該如何使用這個物件，進而衍生出物件該提供什麼樣的功能、具備什麼樣的行為。正因為物件的設計人、使用人都是developer，所以單元測試的程式，當然由developer來設計，最為妥當。尤其由用的人來寫，最為精準。

## When

### 撰寫單元測試的時機點

1. 外部需要使用物件，並對其執行結果有所期待時：開發中。
2. Feature的異動時：修改中。
3. 出現非預期結果時：除錯中。

## Test Cases的意義

1. 可自動執行、馬上執行、快速執行的物件使用說明書，不會有過期或漏了更新的問題。
2. 不管什麼情況發生，不管在什麼環境底下，都能確保其執行結果如同預期。

## 小結

1. 程式碼即文件。
2. Working software based on working test cases.

# [Day 3 動手寫Unit Test](https://ithelp.ithome.com.tw/articles/10102643)

## 測試程式中會有什麼東西？

1. 初始化目標物件。
2. 定義測試方法所需要的參數。
3. 若方法有回傳值，定義預期的回傳結果。
4. 若方法有回傳值，定義一個變數為物件的實際回傳結果。
5. 測試程式實際呼叫目標物件，欲測試的方法。測試程式模擬外部如何使用目標物件。
6. 驗證實際結果與預期結果是否吻合。

## 撰寫單元測試程式碼的3A原則。

1. Arrange：初始化目標物件、相依物件、方法參數、預期結果、或是預期與相依物件的互動方式。
2. Act：呼叫目標物件的方法。
3. Assert：驗證是否符合預期

## 重構循環
紅燈->綠燈->重構->紅燈->綠燈->重構->...

## 測試覆蓋率
測試程式碼覆蓋目標程式碼的百分比。

## 結論

1. 從既有程式碼產生單元測試，是重構既有程式碼，很好用的一個方式。也是增加新的測試案例，很方便的方式。
2. 從測試案列產生對應的程式碼，可以輔助我們，專注在眼前需求，只開發需要開發的功能，避免浪費時間。
3. 設計物件，應思考外部如何使用這個物件，而不是這個物件要提供哪些功能給外面用。
